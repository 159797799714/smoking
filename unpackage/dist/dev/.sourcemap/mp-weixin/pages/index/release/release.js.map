{"version":3,"sources":["webpack:///C:/Users/pc/Desktop/LEI/smoking/main.js","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue?98fb","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue?790f","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue?2823","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue?5ced","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue?71f1","webpack:///C:/Users/pc/Desktop/LEI/smoking/pages/index/release/release.vue?7069"],"names":["createPage","Page","components","topBar","data","formData","article_title","article_content","category_id","tags","address","address_latitude","address_longitude","uploaded","source","imgArr","imgUploadID","time","onLoad","params","type","methods","goIndex","uni","switchTab","url","getAddress","that","chooseLocation","success","res","console","log","name","latitude","longitude","delImg","index","splice","uploadImg","length","leavelength","chooseImage","count","sizeType","sourceType","max_time","tempFilePaths","showLoading","title","map","item","then","hideLoading","showToast","icon","push","JSON","parse","file_id","err","releaseAction","$api","articleRelease","stringify","method","$httpRequest","code","msg"],"mappings":"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","file":"pages/index/release/release.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/index/release/release.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./release.vue?vue&type=template&id=354c8078&scoped=true&\"\nvar renderjs\nimport script from \"./release.vue?vue&type=script&lang=js&\"\nexport * from \"./release.vue?vue&type=script&lang=js&\"\nimport style0 from \"./release.vue?vue&type=style&index=0&id=354c8078&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"354c8078\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\pc\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('354c8078')) {\n      api.createRecord('354c8078', component.options)\n    } else {\n      api.reload('354c8078', component.options)\n    }\n    module.hot.accept(\"./release.vue?vue&type=template&id=354c8078&scoped=true&\", function () {\n      api.rerender('354c8078', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Desktop/LEI/smoking/pages/index/release/release.vue\"\nexport default component.exports","export * from \"-!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./release.vue?vue&type=template&id=354c8078&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./release.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./release.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uploadImg from '../../../common/uploadImg.js'\n\nimport topBar from '../../components/topBar.vue'\nexport default {\n  components: {\n    topBar: topBar\n  },\n  data () {\n    return {\n      formData: {\n        article_title: '',\n        article_content: '',\n        category_id: '',\n        tags: '',\n        address: '',\n        address_latitude: '',\n        address_longitude: '',\n        uploaded: [],\n        source: 'umi'\n      },\n      imgArr: [],\n      imgUploadID: [],\n      time: 0,\n    }\n  },\n  onLoad(params) {\n    if(params.type) {\n      this.formData.source= params.type\n    }\n  },\n  methods: {\n    goIndex() {\n      uni.switchTab({\n        url: '../index'\n      })\n    },\n    // 获取当前位置信息\n    getAddress() {\n      let that= this\n      uni.chooseLocation({\n        success: function (res) {\n          console.log(res)\n          console.log('位置名称：' + res.name);\n          console.log('详细地址：' + res.address);\n          console.log('纬度：' + res.latitude);\n          console.log('经度：' + res.longitude);\n          \n          that.formData.address= res.address + res.name\n          that.formData.address_latitude= res.latitude\n          that.formData.address_longitude= res.longitude\n        }\n      })\n    },\n    \n    // 删除图片\n    delImg(index) {\n      this.imgArr.splice(index, 1)\n      this.formData.uploaded.splice(index, 1)\n    },\n    // 上传图片\n    uploadImg () {\n      let that= this\n      let length= this.imgArr.length\n      let leavelength = 9 - length\n      if(leavelength > 0) {\n        \n        uni.chooseImage({\n          count: leavelength, //默认9\n          sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n          sourceType: ['album'], //从相册选择\n          success: function (res) {\n            \n            let time= 0,\n              max_time= res.tempFilePaths.length\n            uni.showLoading({\n                title: '上传图片中..'\n            })\n            // console.log(JSON.stringify(res.tempFilePaths))\n            res.tempFilePaths.map((item, index) => {\n              // 上传图片\n              uploadImg(item).then((res)=> {\n                time ++\n                if(time === max_time) {\n                  uni.hideLoading()\n                  uni.showToast({\n                    title: max_time + '张图片上传成功',\n                    icon: 'none'\n                  })\n                }\n                that.imgArr.push(item)\n                console.log(JSON.parse(res).data.file_id)\n                that.formData.uploaded.push(JSON.parse(res).data.file_id)\n                \n              })\n            }, err => {\n              uni.hideLoading()\n              uni.showToast({\n                title: '第' + (index + 1) + '张图片上传失败',\n                icon: 'none'\n              })\n            })\n          }\n        }) \n      } else {\n        uni.showToast({\n          title: '最多只能传9张图片哦',\n          icon: 'none'\n        })\n      }\n    },\n    // 发布文章\n    releaseAction() {\n      let that= this\n      if(!that.formData.article_content) {\n        uni.showToast({\n          title: '文章内容不能为空！',\n          icon: 'none'\n        })\n        return\n      }\n      uni.showLoading({\n        title: '发布中'\n      })\n      let params= {\n        url: that.$api.articleRelease,\n        data: {\n          formData: JSON.stringify(that.formData)\n        },\n        method: 'POST'\n      }\n      that.$httpRequest(params).then(res => {\n        uni.hideLoading()\n        if(res.code === 1) {\n          \n          uni.showToast({\n            title: '发布成功,即将自动返回',\n            icon: 'none'\n          })\n          that.goIndex()\n        } else {\n          uni.showToast({\n            title: res.msg,\n            icon: 'none'\n          })\n          return\n        }\n      })\n    }\n  }\n}\n","import mod from \"-!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./release.vue?vue&type=style&index=0&id=354c8078&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./release.vue?vue&type=style&index=0&id=354c8078&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}