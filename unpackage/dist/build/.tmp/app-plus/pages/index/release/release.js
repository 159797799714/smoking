(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/release/release"],{"37ca":function(e,t,a){"use strict";var n,o=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"b",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return n})},"5fa3":function(e,t,a){},"6fae":function(e,t,a){"use strict";a.r(t);var n=a("b4cf"),o=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=o.a},"71f0":function(e,t,a){"use strict";(function(e){a("7539"),a("921b");n(a("66fd"));var t=n(a("e4fe"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},"93f9":function(e,t,a){"use strict";var n=a("5fa3"),o=a.n(n);o.a},b4cf:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a("75e1"));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(){return a.e("pages/components/topBar").then(a.bind(null,"0849"))},r={components:{topBar:s},data:function(){return{formData:{article_title:"",article_content:"",category_id:"",tags:"",address:"",address_latitude:"",address_longitude:"",uploaded:[],source:"umi"},imgArr:[],imgUploadID:[],time:0}},onLoad:function(e){e.type&&(this.formData.source=e.type)},methods:{goIndex:function(){e.switchTab({url:"../index"})},getAddress:function(){var t=this;e.chooseLocation({success:function(e){console.log(n(e," at pages\\index\\release\\release.vue:87")),console.log(n("位置名称："+e.name," at pages\\index\\release\\release.vue:88")),console.log(n("详细地址："+e.address," at pages\\index\\release\\release.vue:89")),console.log(n("纬度："+e.latitude," at pages\\index\\release\\release.vue:90")),console.log(n("经度："+e.longitude," at pages\\index\\release\\release.vue:91")),t.formData.address=e.address+e.name,t.formData.address_latitude=e.latitude,t.formData.address_longitude=e.longitude}})},delImg:function(e){this.imgArr.splice(e,1),this.formData.uploaded.splice(e,1)},uploadImg:function(){var t=this,a=this.imgArr.length,i=9-a;i>0?e.chooseImage({count:i,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var i=0,s=a.tempFilePaths.length;e.showLoading({title:"上传图片中.."}),a.tempFilePaths.map(function(a,r){(0,o.default)(a).then(function(o){i++,i===s&&(e.hideLoading(),e.showToast({title:s+"张图片上传成功",icon:"none"})),t.imgArr.push(a),console.log(n(JSON.parse(o).data.file_id," at pages\\index\\release\\release.vue:136")),t.formData.uploaded.push(JSON.parse(o).data.file_id)})},function(t){e.hideLoading(),e.showToast({title:"第"+(index+1)+"张图片上传失败",icon:"none"})})}}):e.showToast({title:"最多只能传9张图片哦",icon:"none"})},releaseAction:function(){var t=this;if(t.formData.article_content){e.showLoading({title:"发布中"});var a={url:t.$api.articleRelease,data:{formData:JSON.stringify(t.formData)},method:"POST"};t.$httpRequest(a).then(function(a){e.hideLoading(),1===a.code?(e.showToast({title:"发布成功,即将自动返回",icon:"none"}),t.goIndex()):e.showToast({title:a.msg,icon:"none"})})}else e.showToast({title:"文章内容不能为空！",icon:"none"})}}};t.default=r}).call(this,a("6e42")["default"],a("0de9")["default"])},e4fe:function(e,t,a){"use strict";a.r(t);var n=a("37ca"),o=a("6fae");for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);a("93f9");var s,r=a("f0c5"),l=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"281f85a7",null,!1,n["a"],s);t["default"]=l.exports}},[["71f0","common/runtime","common/vendor"]]]);