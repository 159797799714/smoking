(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/article/detail"],{"07f3":function(e,t,i){"use strict";var a,n=function(){var e=this,t=e.$createElement;e._self._c},o=[];i.d(t,"b",function(){return n}),i.d(t,"c",function(){return o}),i.d(t,"a",function(){return a})},"089e":function(e,t,i){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return i.e("pages/components/topBar").then(i.bind(null,"0849"))},o=function(){return Promise.all([i.e("common/vendor"),i.e("pages/components/banner")]).then(i.bind(null,"1999"))},l={components:{topBar:n,banner:o},data:function(){return{scrollTop:0,isHeadShow:!0,title:"",article_id:"",isAuthor:!1,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,indicatorActiveColor:"#ffffff",detail:{},userInfo:{},swiperList:[],strings:[],speakVal:"",commentVal:"",comment_id:"",sumList:{zanTotal:2e3,starTotal:1578,megTotal:1959}}},onLoad:function(e){this.article_id=e.article_id,this.getDetail(this.article_id)},computed:{statusBarHeight:function(){return this.$store.state.statusBarHeight}},methods:{goBack:function(){e.navigateBack({delta:1})},onScroll:function(e){var t=this;e.detail.scrollTop>t.scrollTop&&t.isHeadShow?t.isHeadShow=!1:e.detail.scrollTop<t.scrollTop&&!t.isHeadShow&&(t.isHeadShow=!0),t.scrollTop=e.detail.scrollTop},getDetail:function(t){var i=this,a={url:i.$api.articleDetail,data:{article_id:t}};i.$httpRequest(a).then(function(t){i.detail=t.data.detail,e.getStorage({key:"user_id",success:function(e){e.data===t.data.detail.user_id&&(i.isAuthor=!0)}});var a=t.data.detail.article_content,n=new RegExp("img");a=a.replace(n,'img style="max-width: 100%;"'),i.strings=a})},zanAction:function(t,i){var n=this;console.log(a("点赞",t,t.islike,i," at pages\\index\\article\\detail.vue:174"));var o=this,l=this.$api.commentUnlike;"no"===t.islike&&(l=this.$api.commentLike);var s={url:l,data:{comment_id:t.id}};o.$httpRequest(s).then(function(t){switch(console.log(a("成功了",t," at pages\\index\\article\\detail.vue:187")),n.detail.comments_show[i].islike){case"yes":n.detail.comments_show[i].islike="no",n.detail.comments_show[i].likenum-=1,e.showToast({title:"取消点赞成功",icon:"none"});break;case"no":n.detail.comments_show[i].islike="yes",n.detail.comments_show[i].likenum+=1,e.showToast({title:"点赞成功",icon:"none"});break}})},focusAuthor:function(e,t){console.log(a("关注"," at pages\\index\\article\\detail.vue:211"));var i=this,n=this.$api.articleunFocus;"no"===t&&(n=this.$api.articleFocus);var o={url:n,data:{article_id:e}};i.$httpRequest(o).then(function(e){switch(console.log(a("成功了",e," at pages\\index\\article\\detail.vue:224")),i.detail.isFocus){case"yes":i.detail.isFocus="no";break;case"no":i.detail.isFocus="yes";break}})},commentZanAction:function(t,i,n){var o=this;console.log(a("点赞",t,t.isreplylike,i,n," at pages\\index\\article\\detail.vue:238"));var l=this,s=this.$api.commentreplyunlike;"no"===t.isreplylike&&(s=this.$api.commentReplyLike);var c={url:s,data:{reply_id:t.id}};l.$httpRequest(c).then(function(t){switch(console.log(a("成功了",t," at pages\\index\\article\\detail.vue:251")),o.detail.comments_show[i].replys[n].isreplylike){case"yes":o.detail.comments_show[i].replys[n].isreplylike="no",o.detail.comments_show[i].replys[n].replylikenum-=1,e.showToast({title:"取消点赞成功",icon:"none"});break;case"no":o.detail.comments_show[i].replys[n].isreplylike="yes",o.detail.comments_show[i].replys[n].replylikenum+=1,e.showToast({title:"点赞成功",icon:"none"});break}})},likeArticle:function(){console.log(a("文章点赞"," at pages\\index\\article\\detail.vue:275"));var e=this,t=this.$api.articleLike;this.detail.isLike&&(t=this.$api.articleunLike);var i={url:t,data:{article_id:this.article_id}};e.$httpRequest(i).then(function(t){var i=e.detail.isLike,a=e.detail.articlelike_count;e.detail.articlelike_count=i?a-1:a+1,e.detail.isLike=!i})},onShareAppMessage:function(e){var t=this,i={url:this.$api.articleShare,method:"POST",data:{article_id:t.article_id,source:"wechat"}};return"button"===e.from&&(console.log(a("分享按钮点击"," at pages\\index\\article\\detail.vue:307")),t.$httpRequest(i).then(function(e){console.log(a(e," at pages\\index\\article\\detail.vue:309"))})),{title:t.detail.article_title,path:"/pages/index/article/detail?article_id="+t.article_id}},deleteArticle:function(t){var i=this,n={url:this.$api.articleDelete,method:"POST",data:{article_id:i.article_id}};e.showModal({title:"温馨提示",content:"确认删除此篇文章？",success:function(t){t.confirm?(console.log(a("用户点击确定"," at pages\\index\\article\\detail.vue:333")),i.$httpRequest(n).then(function(t){e.showToast({title:"删除成功",icon:"none",success:function(){e.navigateBack({delta:1})}})})):t.cancel&&e.showToast({title:"已取消",icon:"none"})}})},addComment:function(t){var i=this;console.log(a(this.speakVal," at pages\\index\\article\\detail.vue:357"));var n=this,o={url:this.$api.articleAddComment,data:{article_id:n.article_id,comment:t.detail.value}};n.$httpRequest(o).then(function(t){n.closeComment(),n.getDetail(i.article_id),e.showToast({title:"发布成功",icon:"none"})})},addCommentReply:function(t){var i=this,a=this,n={url:this.$api.commentreply,data:{comment_id:this.comment_id,comment:t.detail.value}};a.$httpRequest(n).then(function(t){a.closeComment(),a.getDetail(i.article_id),e.showToast({title:"发布成功",icon:"none"})})},commentComment:function(e){console.log(a("点击了",e," at pages\\index\\article\\detail.vue:396")),this.comment_id=e},closeComment:function(){this.comment_id="",this.commentVal="",this.speakVal=""}}};t.default=l}).call(this,i("6e42")["default"],i("0de9")["default"])},"10ea":function(e,t,i){"use strict";(function(e){i("7539"),i("921b");a(i("66fd"));var t=a(i("19f2"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},"19f2":function(e,t,i){"use strict";i.r(t);var a=i("07f3"),n=i("2812");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("9058");var l,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"65f874f5",null,!1,a["a"],l);t["default"]=c.exports},2812:function(e,t,i){"use strict";i.r(t);var a=i("089e"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},9058:function(e,t,i){"use strict";var a=i("d8d4"),n=i.n(a);n.a},d8d4:function(e,t,i){}},[["10ea","common/runtime","common/vendor"]]]);